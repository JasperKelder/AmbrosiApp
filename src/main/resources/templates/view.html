<!DOCTYPE HTML>
<html lang="en" xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <title>EatAndTreat - View Recipe</title>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheet.css"/>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Finger Paint'>
    <link rel="icon" type="image/png" href="/images/smileySmall.png">
</head>
<body>
<!--Top navigation-->
<ul>
    <li>
        <a th:href="@{/index}" class="nopadding">
            <img class="broccoli" src="/images/broccoli.png" alt="Logo">
        </a>
    </li>
    <li class="topnav eatandtreattext">
        <a th:href="@{/index}">EatAndTreat</a>
    </li>
    <li class="totheright">
        <a th:href="@{/logout}" class="nopadding">
            <img class="logout" src="/images/logout.jpg" alt="Logo">
        </a>
    </li>
    <li class="topnav totheright imagetextcontainer" th:unless="${#authorization.expression('hasRole(''USER'')')}">
        <a class="kitchenlogocontainer" th:href="@{/login}">
            <img class="kitchenlogo" src="/images/cook.png" alt="Kitchen">
        </a>
        <div class="kitchenlogotextplace">MyKitchen</div>
    </li>
    <li class="totheright imagetextcontainer" th:if="${#authorization.expression('hasRole(''USER'')')}">
        <a class="kitchenlogocontainer" th:href="@{/mykitchen}">
            <img class="kitchenlogo" src="/images/cook.png" alt="Kitchen">
        </a>
        <div class="kitchenlogotextplace">MyKitchen</div>
    </li>
    <li class="searchbarli">
        <input id="searchbar" type="text" placeholder="Search">
    </li>
</ul>
<!--Lower navigation-->
<ul class="navborder">
    <li class="adminbutton" sec:authorize="hasAuthority('ROLE_ADMIN')">
        <a class="lowernav" th:href="@{/recipes}">Recipe</a>
    </li>
    <li class="adminbutton" sec:authorize="hasAuthority('ROLE_ADMIN')">
        <a class="lowernav" th:href="@{/cuisine}">Cuisine</a>
    </li>
    <li class="adminbutton" sec:authorize="hasAuthority('ROLE_ADMIN')">
        <a class="lowernav" th:href="@{/category}">Category</a>
    </li>
</ul>
<div class="spaceSmall"></div>
<!-- Id to indicate what can be printed -->
<div id="printpage">
    <!-- Displays the recipe title -->
    <div class="message" th:text="${recipe.recipeTitle}"></div>
    <div class="flex-container">
        <div class="grid-container-view">
            <div class="grid-item-view">
                <div class="flex-container">
                    <!-- Displays ingredients in a grid to the left -->
                    <table class="green">
                        <tr>
                            <th>Ingredients</th>
                        </tr>
                        <tr>
                            <td th:text="${recipe.ingredients}"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <!-- Displays an image in a grid in the center -->
            <div class="grid-item-view">
                <img th:src="|data:image/jpeg;base64,${image}|" alt="Food" class="viewImage">
            </div>
            <div class="grid-item-view">
                <div class="flex-container">
                    <!-- Displays preparation in a grid to the right -->
                    <table class="green">
                        <tr>
                            <th>Preparation</th>
                        </tr>
                        <tr>
                            <td th:text="${recipe.recipePreperation}"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="spaceMedium"></div>
    <!-- Shows who added the recipe -->
    <div class="messagesmall">Contributed by</div>
    <div class="messagesmall" th:text="${recipe.user}"></div>
    <div class="spaceMedium"></div>
    <div class="flex-container">
        <!-- Show servings, preparationTime, cookTime, cuisine and category -->
        <table class="green">
            <tr>
                <th>Servings</th>
                <td th:text="${recipe.servings}"></td>
            </tr>
            <tr>
                <th>PreperationTime</th>
                <td th:text="${recipe.preperationTime}"></td>
            </tr>
            <tr>
                <th>CookTime</th>
                <td th:text="${recipe.cooktime}"></td>
            <tr>
                <th>Cuisine</th>
                <td th:text="${recipe.cuisineName}"></td>
            </tr>
            <tr>
                <th>Category</th>
                <td th:text="${recipe.categoryName}"></td>
            </tr>
            </tr>
        </table>
        <div class="spaceMedium"></div>
        <!-- Button for printing -->
        <input type="submit" value="Print" onClick="printPageArea('printpage')">
    </div>
</div>
<div class="spaceMedium"></div>
<script>
    function printPageArea(divIDToPrint) {
        var printContent = document.getElementById(divIDToPrint);
        var WinPrint = window.open('', '', 'width=900,height=650');
        WinPrint.document.write(printContent.innerHTML);
        WinPrint.document.close();
        WinPrint.focus();
        WinPrint.print();
    }
</script>
</body>
</html>